#ifndef APIC_H
#define APIC_H
#include "types.h"

typedef struct mp
{
	byte signature[4];		//_MP_
	void *physaddr;
	byte length;
	byte specrev;
	byte checksum;			//All bytes must add up to 0
	byte type;				//MP system config type
	byte imcrp;
	byte reserved[3];
} __attribute__((packed)) mp_t;

typedef struct mp_conf
{
	byte signature[4];		//PCMP
	ushort length;
	byte specrev;
	byte checksum;
	byte oem[8];
	byte product[12];
	void *oemaddr;
	ushort oem_length;
	ushort count;
	void *lapic;
	ushort et_length;
	byte et_checksum;
} mp_conf_t;

typedef struct mp_proc
{
	
} mp_proc_t;

//Initialize the apic, and each cpu with it
void apic_init();

#endif
